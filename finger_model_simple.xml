<mujoco model="finger_simple">
  <compiler angle="radian" meshdir="meshes" autolimits="true"/>
  <option gravity="0 0 -9.81" timestep="0.001"/>

  <default>
    <!-- 适中的阻尼参数 -->
    <joint damping="0.3" armature="0.005" frictionloss="0.01"/>
    <geom contype="1" conaffinity="1" margin="0.002" solref="0.005 1" solimp="0.9 0.95 0.001"/>
    <position ctrllimited="true" ctrlrange="-1.57 1.57" kp="20"/>
  </default>

  <worldbody>
    <!-- 舵机框架基座 - 使用简单box -->
    <body name="base" pos="0 0 0">
      <geom name="base_geom" type="box" size="0.04 0.03 0.01" density="2700" rgba="0.7 0.7 0.7 1"/>
      
      <!-- 舵机1 - 使用cylinder + box组合 -->
      <body name="servo1" pos="0.02 0.015 0.01">
        <!-- 舵机主体 -->
        <geom name="servo1_body" type="box" size="0.015 0.01 0.01" density="1500" rgba="0.8 0.2 0.2 1"/>
        <!-- 舵机输出轴 -->
        <geom name="servo1_shaft" type="cylinder" size="0.003 0.008" density="2700" rgba="0.6 0.1 0.1 1"/>
        <joint name="j_servo1" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.57 1.57"/>
        <site name="s_servo1_out" pos="0.008 0 0" size="0.002" rgba="1 0 0 1"/>
      </body>

      <!-- 舵机2 - 使用cylinder + box组合 -->
      <body name="servo2" pos="0.02 -0.015 0.01">
        <!-- 舵机主体 -->
        <geom name="servo2_body" type="box" size="0.015 0.01 0.01" density="1500" rgba="0.2 0.8 0.2 1"/>
        <!-- 舵机输出轴 -->
        <geom name="servo2_shaft" type="cylinder" size="0.003 0.008" density="2700" rgba="0.1 0.6 0.1 1"/>
        <joint name="j_servo2" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.57 1.57"/>
        <site name="s_servo2_out" pos="0.008 0 0" size="0.002" rgba="0 1 0 1"/>
      </body>

      <!-- 指转部件（基节）- 使用capsule -->
      <body name="link_base" pos="0.04 0 0.02">
        <geom name="link_base_geom" type="capsule" fromto="0 0 0 0.035 0 0" size="0.006" density="1100" rgba="0.5 0.5 0.8 1"/>
        <joint name="j_base" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.2 1.2"/>
        <site name="s_base_tip" pos="0.035 0 0" size="0.002" rgba="0 0 1 1"/>
        
        <!-- 指柱部件（中节）- 使用capsule -->
        <body name="link_mid" pos="0.035 0 0">
          <geom name="link_mid_geom" type="capsule" fromto="0 0 0 0.03 0 0" size="0.005" density="1100" rgba="0.8 0.5 0.5 1"/>
          <joint name="j_mid" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.2 1.2"/>
          <site name="s_mid_tip" pos="0.03 0 0" size="0.002" rgba="1 0 1 1"/>
          
          <!-- 指尖部件（末节）- 使用capsule -->
          <body name="link_tip" pos="0.03 0 0">
            <geom name="link_tip_geom" type="capsule" fromto="0 0 0 0.025 0 0" size="0.004" density="1100" rgba="0.9 0.9 0.9 1"/>
            <joint name="j_tip" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.2 1.2"/>
            <site name="s_fingertip" pos="0.025 0 0" size="0.002" rgba="1 1 0 1"/>
          </body>
        </body>
      </body>

      <!-- 指传动部件 - 使用box -->
      <body name="link_trans" pos="0.04 0.02 0.01">
        <geom name="link_trans_geom" type="box" size="0.015 0.003 0.003" density="1100" rgba="0.5 0.8 0.5 1"/>
        <joint name="j_trans" type="hinge" axis="0 1 0" pos="0 0 0" range="-1.0 1.0"/>
        <site name="s_trans_output" pos="0.015 0 0" size="0.002" rgba="0 1 1 1"/>
      </body>
    </body>
  </worldbody>

  <!-- 执行器配置 -->
  <actuator>
    <!-- 舵机执行器 -->
    <position name="a_servo1" joint="j_servo1" kp="20"/>
    <position name="a_servo2" joint="j_servo2" kp="20"/>
    
    <!-- 指传动执行器 -->
    <position name="a_trans1" joint="j_trans" kp="15"/>
    
    <!-- 指节执行器 - 用于测试 -->
    <position name="a_base" joint="j_base" kp="15"/>
    <position name="a_mid" joint="j_mid" kp="12"/>
    <position name="a_tip" joint="j_tip" kp="10"/>
  </actuator>

  <!-- 传感器配置 -->
  <sensor>
    <!-- 关节位置传感器 -->
    <jointpos joint="j_servo1" name="servo1_pos"/>
    <jointpos joint="j_servo2" name="servo2_pos"/>
    <jointpos joint="j_base" name="base_pos"/>
    <jointpos joint="j_mid" name="mid_pos"/>
    <jointpos joint="j_tip" name="tip_pos"/>
    <jointpos joint="j_trans" name="trans_pos"/>
    
    <!-- 关节速度传感器 -->
    <jointvel joint="j_servo1" name="servo1_vel"/>
    <jointvel joint="j_servo2" name="servo2_vel"/>
    <jointvel joint="j_base" name="base_vel"/>
    <jointvel joint="j_mid" name="mid_vel"/>
    <jointvel joint="j_tip" name="tip_vel"/>
    <jointvel joint="j_trans" name="trans_vel"/>
    
    <!-- 指尖力传感器 -->
    <force site="s_fingertip" name="fingertip_force"/>
    <torque site="s_fingertip" name="fingertip_torque"/>
  </sensor>

  <!-- 可视化设置 -->
  <visual>
    <global azimuth="120" elevation="-20"/>
    <headlight ambient="0.4 0.4 0.4" diffuse="0.8 0.8 0.8" specular="0.3 0.3 0.3"/>
  </visual>
</mujoco>